<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<title>Baby Animal Stress Sanctuary</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <meta name="description" content="Lower your stress - and breathe.  Take a break with our adorable baby animals from around the web." />
        <meta name="keywords" content="html5, baby, animal, stress, sanctuary, life extension, relax, chill" />
        <meta name="author" content="Case Consulting" />

        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link rel="stylesheet" type="text/css" href="css/fonts.css" />

		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
		<script type="text/javascript" src="js/modernizr.custom.21750.js"></script>
		<script type="text/javascript" src="js/StackBlur.js"></script>
		
		<link rel="shortcut icon" href="images/favicon.ico"/> 
		<link rel="icon" href="images/favicon.ico" type="image/x-icon" />

        <noscript>
            <style>
                .bx-loading{display:none;}
            </style>
        </noscript>
		
		<script type="text/javascript">
			<!-- Analytics - specific to this website -->
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-33354534-1']);
			_gaq.push(['_trackPageview']);

			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		</script>
    </head>
    <body>
		
        <div class="container">
			<div id="bx-wrapper" class="bx-wrapper">
					<div class="bx-loading">
						<span>Loading...</span>
					</div>
					<div class="bx-content">
					</div>
					<div id="audio_player">
							<audio controls="controls" autoplay="autoplay" loop="loop" title="Never Forget from Halo 3" preload="auto" autobuffer>
								<source src="music/never_forget.mp3" type='audio/mpeg; codecs="mp3"'/>
								<source src="music/never_forget.ogg" type='audio/ogg; codecs="vorbis"'/>
								Your browser does not support the audio element.
							</audio>
					</div> 
		
					<div class="bx-container">
						<img src="images/large/30.jpg" alt="image30" title="Smiling Dog: http://en.wikipedia.org/wiki/File:Smiling_Dog_Face.jpg"/>
						<img src="images/large/29.jpg" alt="image29" title="Bear Cub Climbing: http://en.wikipedia.org/wiki/File:Bear_cub.jpg"/>
						<img src="images/large/28.jpg" alt="image28" title="Beagle Puppy: http://en.wikipedia.org/wiki/File:Beagle_puppy_Cadet.jpg"/>
						<img src="images/large/27.jpg" alt="image27" title="Polar Bear Cubs: http://en.wikipedia.org/wiki/File:Ursus_maritimus_us_fish.jpg"/>
						<img src="images/large/26.jpg" alt="image26" title="Day Old Giraffe: http://en.wikipedia.org/wiki/File:One_day_old_giraffe_with_mother_-Birmingham_Zoo.jpg"/>
						<img src="images/large/25.jpg" alt="image25" title="Baby Elephant with Mother: http://en.wikipedia.org/wiki/File:Baby_Elephant.jpg"/>
						<img src="images/large/24.jpg" alt="image24" title="Young Kitten Opens Eyes for First Time: http://en.wikipedia.org/wiki/File:Youngkitten.jpg"/>
						<img src="images/large/23.jpg" alt="image23" title="ZooBorns Amur Tiger Twins: http://www.zooborns.com/.a/6a010535647bf3970b0167685c3e3b970b-popup.jpg"/>
						<img src="images/large/22.jpg" alt="image22" title="Racoon Pair:  http://animals.nationalgeographic.com/animals/photos/animal-pairs/#/raccoon-pairs_32055_600x450.jpg"/>
						<img src="images/large/21.jpg" alt="image21" title="Cheetahs: http://animals.nationalgeographic.com/animals/photos/animal-pairs/#/cheetahs-grass-kenya_22651_600x450.jpg"/>
						<img src="images/large/20.jpg" alt="image20" title="Alpacas http://animals.nationalgeographic.com/animals/photos/animal-pairs/#/alpacas-kiss_32031_600x450.jpg"/>
						<img src="images/large/19.jpg" alt="image19" title="African Lion Cub: http://animals.nationalgeographic.com/animals/photos/big-cat-cubs/"/>
						<img src="images/large/18.jpg" alt="image18" title="Asian Elephant: http://animals.nationalgeographic.com/animals/photos/baby-animals/#/baby-asian-elephant_227_600x450.jpg"/>
						<img src="images/large/17.jpg" alt="image17" title="Lynx: http://animals.nationalgeographic.com/animals/photos/baby-animals/#/baby-lynx_232_600x450.jpg"/>
						<img src="images/large/16.jpg" alt="image16" title="Bobcat: http://animals.nationalgeographic.com/animals/photos/baby-animals/#/baby-bobcat_229_600x450.jpg"/>
						<img src="images/large/15.jpg" alt="image15" title="Lamb: http://commons.wikimedia.org/wiki/File:Sheep,_Stodmarsh_6.jpg"/>
						<img src="images/large/14.jpg" alt="image14" title="Kitty Bouquet: many sources dating back to 2000 in Turkey, 2001 in Russia.jpg"/>
						<img src="images/large/13.jpg" alt="image13" title="Red Kitten: http://commons.wikimedia.org/wiki/File:Red_Kitten_01.jpg"/>
						<img src="images/large/12.jpg" alt="image12" title="Ducklings: http://commons.wikimedia.org/wiki/File:Ducklings_at_Lost_Lagoon.jpg"/>
						<img src="images/large/11.jpg" alt="image11" title="Baby Monkey: http://commons.wikimedia.org/wiki/File:Ducklings_at_Lost_Lagoon.jpg"/>
						<img src="images/large/10.jpg" alt="image10" title="Baby Lemur: http://commons.wikimedia.org/wiki/File:Lemur_coronaris.JPG"/>
						<img src="images/large/9.jpg" alt="image09" title="Baby Warthogs: http://commons.wikimedia.org/wiki/File:Warthog_babies_in_Murchison_Falls_National_Park.jpg"/>
						<img src="images/large/8.jpg" alt="image08" title="Baby Hippo Swims: http://commons.wikimedia.org/wiki/File:Baby_hippo_swims.jpg"/>
						<img src="images/large/7.jpg" alt="image07" title="Chick: http://commons.wikimedia.org/wiki/File:Chick.jpg"/>
						<img src="images/large/6.jpg" alt="image06" title="Colt: http://www.flickr.com/photos/57038667@N00/485534307/"/>
						<img src="images/large/5.jpg" alt="image05" title="Newborn Impala: http://www.flickr.com/photos/15745225@N00/450300598/"/>
						<img src="images/large/4.jpg" alt="image04" title="Juvenile Ostrich: http://www.flickr.com/photos/15745225@N00/422172559/"/>
						<img src="images/large/3.jpg" alt="image03" title="Lion Cubs Drinking: http://www.flickr.com/photos/15745225@N00/456248511/"/>
						<img src="images/large/2.jpg" alt="image02" title="Fawn in Forest: http://www.flickr.com/photos/61779926@N00/173951932/"/>
						<img src="images/large/1.jpg" alt="image01" title="ZooBorns Baby Mouse Lemurs: http://www.zooborns.com/.a/6a010535647bf3970b01676854ba91970b-800wi.jpg"/>
					</div>
				</div>
			</div>

        <script type="text/javascript">
			// declare BlurBGImage & call the init function
            $(function() {
				
				var BlurBGImage	= (function() {
					
					var $bxWrapper			= $('#bx-wrapper'),
						// loading status to show while preloading images
						$bxLoading			= $bxWrapper.find('div.bx-loading'),
						// container for the bg images and respective canvas
						$bxContainer		= $bxWrapper.find('div.bx-container'),
						// the bg images we are gonna use
						$bxImgs				= $bxContainer.children('img'),
						// total number of bg images
						bxImgsCount			= $bxImgs.length,
						// current image's index
						current				= 0,
						// variation to show the image:
						// (1) - blurs the current one, fades out and shows the next image
						// (2) - blurs the current one, fades out, shows the next one (but initially blurred)
						// speed is the speed of the animation
						// blur Factor is the factor used in the StackBlur script
						animOptions			= { speed : 1200, variation : 2, blurFactor : 10 },
						// control if currently animating
						isAnim				= false,
						// check if canvas is supported
						supportCanvas 		= Modernizr.canvas,
						// slideshow
						slideshow_interval	= 8000,
						slideshow_time,
						
						// init function
						init				= function() {
							
							// preload all images and respective canvas
							var loaded = 0;
							
							$bxImgs.each( function(i) {
								
								var $bximg	= $(this);
								
								// save the position of the image in data-pos
								$('<img data-pos="' + $bximg.index() + '"/>').load(function() {
									
									var $img	= $(this),
										// size of image to be fullscreen and centered
										dim		= getImageDim( $img.attr('src') ),
										pos		= $img.data( 'pos' );
									
									// add the canvas to the DOM
									$.when( createCanvas( pos, dim ) ).done( function() {
											
										++loaded;
										
										// all images and canvas loaded
										if( loaded === bxImgsCount ) {
											
											
											// apply style for bg image and canvas
											centerImageCanvas();
											
											// hide loading status
											$bxLoading.hide();
											
											// initialize events
											initEvents();
											
											// start slideshow
											startSlideshow();
											
										}
										
									});
								
								}).attr( 'src', $bximg.attr('src') );
							
							});
							
						},
						startSlideshow		= function() {
							
							slideshow_time = setTimeout( function() {
								
								if( !isAnim ) {
									
									var pos = current;
									( pos < bxImgsCount - 1 ) ? ++pos : pos = 0;
									isAnim = true;
									// show the bg image
									showImage( pos );
									startSlideshow();
								
								}
							
							}, slideshow_interval );
							
						},
						// creates the blurred canvas image
						createCanvas		= function( pos, dim ) {
							
							return $.Deferred( function(dfd) {
								
								// if canvas not supported return
								if( !supportCanvas ) {
									dfd.resolve();
									return false;
								}	
								
								// create the canvas element:
								// size and position will be the same like the fullscreen image
								var $img	= $bxImgs.eq( pos ),
									imgW	= dim.width,
									imgH	= dim.height,
									imgL	= dim.left,
									imgT	= dim.top,
									
									canvas	= document.createElement('canvas');
								
								canvas.className		= 'bx-canvas';
								canvas.width 			= imgW;
								canvas.height 			= imgH;
								canvas.style.width  	= imgW + 'px';
								canvas.style.height 	= imgH + 'px';
								canvas.style.left		= imgL + 'px';
								canvas.style.top		= imgT + 'px';
								canvas.style.visibility = 'hidden';
								// save position of canvas to know which image this is linked to
								canvas.setAttribute('data-pos', pos);
								// append the canvas to the same container where the images are
								$bxContainer.append( canvas );
								// blur it using the StackBlur script
								stackBlurImage( $img.get(0), dim, canvas, animOptions.blurFactor, false, dfd.resolve );
							
							}).promise();
								
						},
						// gets the image size and position in order to make it fullscreen and centered.
						getImageDim			= function( img ) {
							
							var $img    = new Image();
							
							$img.src    = img;
							
							var $win	= $( window ),
								w_w		= $win.width(),
								w_h		= $win.height(),
								r_w		= w_h / w_w,
								i_w		= $img.width,
								i_h		= $img.height,
								r_i		= i_h / i_w,
								new_w, new_h, new_left, new_top;
									
							if( r_w > r_i ) {
								
								new_h	= w_h;
								new_w	= w_h / r_i;
							
							}
							else {
							
								new_h	= w_w * r_i;
								new_w	= w_w;
							
							}
									
							return {
								width	: new_w,
								height	: new_h,
								left	: ( w_w - new_w ) / 2,
								top		: ( w_h - new_h ) / 2
							};
						
						},
						// initialize the events
						initEvents			= function() {
							
							$( window ).on('resize.BlurBGImage', function( event ) {
								
								// apply style for bg image and canvas
								centerImageCanvas();
								return false;
								
							});
						
							
						},
						// apply style for bg image and canvas
						centerImageCanvas	= function() {
							
							$bxImgs.each( function(i) {
								
								var $bximg	= $(this),
									dim			= getImageDim( $bximg.attr('src') ),
									$currCanvas	= $bxContainer.children('canvas[data-pos=' + $bximg.index() + ']'),
									styleCSS	= {
										width	: dim.width,
										height	: dim.height,
										left	: dim.left,
										top		: dim.top
									};	
								
								$bximg.css( styleCSS );
								
								if( supportCanvas )
									$currCanvas.css( styleCSS );
									
								if( i === current )	
									$bximg.show();
								
							});
							
						},
						// shows the image at position "pos"
						showImage			= function( pos ) {
								
								// current image 
							var $bxImage		= $bxImgs.eq( current );
								// current canvas
								$bxCanvas		= $bxContainer.children('canvas[data-pos=' + $bxImage.index() + ']'),
								// next image to show
								$bxNextImage	= $bxImgs.eq( pos ),
								// next canvas to show
								$bxNextCanvas	= $bxContainer.children('canvas[data-pos='+$bxNextImage.index()+']');
							
							// if canvas is supported
							if( supportCanvas ) {
								
								$bxCanvas.css( 'z-index', 100 ).css('visibility','visible');
								
								$.when( $bxImage.fadeOut( animOptions.speed ) ).done( function() {
									
									switch( animOptions.variation ) {
									
										case 1 	:
											$.when( $bxNextImage.fadeIn( animOptions.speed ) ).done( function() {
										
												$bxCanvas.css( 'z-index', 1 ).css('visibility','hidden');
												current = pos;
												$bxNextCanvas.css('visibility','hidden');
												isAnim 	= false;
											
											});
											break;
										case 2	:
											$bxNextCanvas.css('visibility','visible');
											
											$.when( $bxCanvas.fadeOut( animOptions.speed * 1.5 ) ).done( function() {
											
												$(this).css({
													'z-index' 		: 1,
													'visibility'	: 'hidden'
												}).show();
												
												$.when( $bxNextImage.fadeIn( animOptions.speed ) ).done( function() {
													
													current = pos;
													$bxNextCanvas.css('visibility','hidden');
													isAnim 	= false;
												
												});
												
											});
											break;
									
									};
									
								});
							
							}
							// if canvas is not shown just work with the bg images
							else {
							
								$.when( $bxNextImage.css( 'z-index', 102 ).fadeIn( animOptions.speed ) ).done( function() {
									
									current = pos;
									$bxImage.hide();
									$(this).css( 'z-index', 101 );
									isAnim = false;
								
								});
							
							}
						
						};
						
					return {
						init	: init
					};
				
				})();
				
				// call the init function
				BlurBGImage.init();
				
            });
        </script>
 
<!-- 
===========================================================================
      README.TXT
===========================================================================

   Baby Animal Stress Sanctuary  
   http://BabyAnimalStressSanctuary.com

   Unless required by applicable law or agreed to in writing, software
   is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR 
   CONDITIONS OF ANY KIND, either express or implied.

   Case Consulting
   info@BabyAnimalStressSanctuary.com

===========================================================================
       ABOUT THIS PROJECT
===========================================================================

   Quick project to explore some HTML5 capabilities - uses HTML5, CSS, 
   and Javascript.
   
   Inspired by:
        The online Sanctuary created by K Nowling many years ago, 
        http://www.ted.com/talks/jane_mcgonigal_the_game_that_can_give_you_10_extra_years_of_life.html,
        and the happiness found at http://www.randomkittengenerator.com.

===========================================================================
      SOURCES
===========================================================================

    Music:
	http://www.vgmusic.com/music/console/microsoft/xbox360/index-classic.html

    Blur effects:
	http://tympanus.net/codrops/2011/11/18/fullscreen-image-blur-effect-with-html5

    Blur effects uses:
     	A custom version of Modernizr, an open source JavaScript library from 
        http://modernizr.com.

	    A modified version of StackBlur - a fast blur for Canvas by  Mario Klingemann from 
        http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html

    Images:
	All images are believed to be open source, public domain, or licenced under Creative Commons.
                Links can be seen by viewing the page source.   If proper attribution has not been provided, 
	please notify info@babyanimalstresssanctuary.com.


===========================================================================

===========================================================================
-->
   </body>
</html>